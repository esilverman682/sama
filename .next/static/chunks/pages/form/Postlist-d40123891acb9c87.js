(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3557],{3555:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form/Postlist",function(){return n(2442)}])},2442:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(5893),a=n(7066),l=n(7294),r=n(1163),o=n(3454);function i(){let[e,t]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[c,u]=(0,l.useState)(null),[d,f]=(0,l.useState)(!1),[h,p]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),N=(0,r.useRouter)(),b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(!0);try{let n=await a.Z.post(o.env.NEXT_PUBLIC_STAGING_URL,{query:"\n  query GetPosts($first: Int, $after: String) {\n    posts(first: $first, after: $after) {\n      nodes {\n        title\n        slug\n        content\n        date\n        categories {\n          nodes {\n            name\n            parent {\n              node {\n                name\n              }\n            }\n          }\n        }\n      }\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n    }\n  }\n",variables:{first:10,after:e}}),s=n.data.data.posts.nodes,l=n.data.data.posts.pageInfo;t(e=>[...e,...s]),f(l.hasNextPage),p(l.endCursor),u(null)}catch(e){u("Failed to fetch posts.")}finally{i(!1),m(!1)}};(0,l.useEffect)(()=>{b()},[]);let g=e=>{N.push("/form/post?slug=".concat(e))};return(0,s.jsxs)("div",{className:"p-4 m-2",children:[(0,s.jsx)("h1",{className:"text-4xl mb-4",children:"Posts Review Site"}),n&&0===e.length&&(0,s.jsx)("p",{className:"text-center",children:"Loading..."}),c&&(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",c]}),e.map(e=>(0,s.jsx)("div",{className:"mb-4 pb-2 pl-2 pr-2 border-b border-gray-300",children:(0,s.jsx)("h2",{className:"text-2xl pb-2 cursor-pointer text-blue-500",onClick:()=>g(e.slug),children:e.title})},e.slug)),d&&(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsx)("button",{onClick:()=>{m(!0),b(h)},disabled:x,className:"px-6 py-3 bg-blue-500 text-white rounded-md shadow-md transition-all duration-300 ease-in-out \n              ".concat(x?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"),children:x?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"text-blue-300",cx:"12",cy:"12",r:"10",fill:"none",strokeWidth:"4"}),(0,s.jsx)("path",{className:"text-blue-500",fill:"currentColor",d:"M12 2v10l4 4"})]}),"Loading..."]}):"Load More"})})]})}}},function(e){e.O(0,[7066,2888,9774,179],function(){return e(e.s=3555)}),_N_E=e.O()}]);